(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1729],{81606:function(e,t,r){"use strict";r.d(t,{zS:function(){return i.z},Yy:function(){return i.Y}}),r(49060);var i=r(54807)},11729:function(e,t,r){"use strict";r.r(t);var i=r(27812),n=r(59499),o=r(50029),c=r(87794),s=r.n(c),a=r(90512),u=r(78036),d=r(5152),l=r.n(d),p=r(11163),f=r(51702),m=r(67294),_=r(50946),h=r(6100),g=r(2409),v=r(57506),k=r(58261),P=r(89411),y=r(92040),b=r(28273),S=r(23662),x=r(15347),C=r(58646),I=r(36408),T=r(30271),E=r(61866),j=r(11334),G=r(5546),O=r(79186),D=r(17584),w=r(68904),R=r(62891),B=r(24316),L=r(29298),N=r(38752),A=r(49551),M=r(41503),Z=r(4933),W=r(28685),H=r(86666),F=r(61972),K=r.n(F),Q=r(85893);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var z=l()(function(){return Promise.resolve().then(r.bind(r,65003))},{loading:function(){return(0,Q.jsx)(D.default,{isHorizontal:!0,withBonus:!0,withCreditTerms:!0,withFavouriteBtn:!0,withShippingInfo:!0,withStickers:!0})},loadableGenerated:{webpack:function(){return[65003]}}});t.default=(0,u.Pi)(function(e){var t,r,c,u,d=e.onAddToCartSuccess,l=e.isBot,D=e.product,F=D.isPreorder,q=D.title,U=D.price,Y=D.sku,V=D.payment,J=D.rating,$=D.reviews,X=D.images,ee=D.image_url,et=D.hasPromotions,er=D.type,ei=D.urlHandle,en=D.uri,eo=D.showcase,ec=D.params,es=void 0===ec?[]:ec,ea=D.cashback_amount,eu=D.shortDescription,ed=D.deliveryDate,el=D.pickupDate,ep=D.merchant,ef=D.unit_measurement,em=D.kaspiInstallmentInfo,e_=D.hasExpressDelivery,eh=D.hasFastDelivery,eg=D.deliveryTime,ev=e.product,ek=e.isSearchPage,eP=e.isRecommendations,ey=void 0!==eP&&eP,eb=e.searchQuery,eS=e.position,ex=(0,v.oR)(),eC=ex.wishlist,eI=eC.checkIfOnList,eT=eC.remove,eE=eC.add,ej=ex.core,eG=ej.currentCity,eO=ej.isHorizontalProductCardView,eD=ej.isMobile,ew=ex.user.isSignedIn,eR=ex.checkout,eB=eR.addProduct,eL=eR.cartData,eN=eR.checkIsInCart,eA=ex.searchStore,eM=eA.queryId,eZ=eA.reesQueryId,eW=eA.sendClickEvent,eH=eA.queryOrReesQueryIdParam,eF=(0,f.$G)(["product","common"]).t,eK=(null===(u=es.find(function(e){return"merchant"===e.key}))||void 0===u?void 0:u.values[0])===T.i.AIRBA_FRESH||(null==ep?void 0:ep.code)===T.i.AIRBA_FRESH,eQ=er===B.C0.SERVICE,ez=(0,m.useState)(!1),eq=ez[0],eU=ez[1],eY=(0,m.useState)([]),eV=eY[0],eJ=eY[1],e$=(0,m.useState)({adaptedTopStickers:[],adaptedRightStickers:[]}),eX=e$[0],e0=eX.adaptedTopStickers,e1=eX.adaptedRightStickers,e6=e$[1],e5=(0,p.useRouter)(),e2=(0,L.A)(Y,eL.promotions),e7=(0,N.x)({promotions:eV,mainProductSku:Y,type:E.il.GIFT,cartsPromotionsMap:e2}),e8=e7.isOnlyOneGift,e4=e7.giftBlockRef,e9=e7.setGiftListIsOpened,e3=e7.giftListIsOpened,te=e7.selectedGifts,tt=e7.onDeleteGift,tr=e7.onAddGift,ti=e7.limitExceeded,tn=e7.giftProducts,to=tn.length,tc=(0,P.l)();if((0,m.useEffect)(function(){var e,t=(e=(0,o.Z)(s().mark(function _callee(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,k.F)({sku:Y,cityId:eG.city_id,mainEntityType:E.Gc.PRODUCT,isRequired:!0});case 3:eJ(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Error&&(0,g.h4)(null===e.t0||void 0===e.t0?void 0:e.t0.message,"error");case 10:case"end":return e.stop()}},_callee,null,[[0,7]])})),function(){return e.apply(this,arguments)});et&&t()},[et]),(0,m.useEffect)(function(){e6((0,H.t)({t:eF,product:ev}))},[ev]),!U)return null;var addGTMEvent=function(e,t){if(e===y.c.ADD_TO_CART||e===y.c.FRESH_ADD_TO_CART){var r=(0,G._)(eL);tc.dispatch({event:e,data:_objectSpread(_objectSpread({},ek&&{params:{query_id:eM,rees_query_id:eZ}}),{},{ecommerce:(0,b.Zf)({product:t||ev,source:ek?j.D.SEARCH_RESULTS:void 0,suggestItemIndex:eS}),current_cart:(0,b.wC)(eL.products,r)}),resetData:{ecommerce:null,current_cart:null}})}else tc.dispatch({event:e,data:{ecommerce:(0,b.Zf)({product:t||ev})},resetData:{ecommerce:null}})},ts=(t=(0,o.Z)(s().mark(function _callee2(){var e,t,r,i,n;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,eU(!0),t=null===(e=Object.values(te).flat())||void 0===e?void 0:e[0],r=[],t&&r.push(t),o.next=7,eB({product:{sku:Y,type:er||B.C0.REGULAR,merchant:eK?W.DB:W.z6,source:ek?R.mo:"",sourceQueryId:ek?eM:"",sourceReesQueryId:ek?eZ:""},promotions:r});case 7:n=null==(i=o.sent)?void 0:i.products.find(function(e){return e.sku===Y}),addGTMEvent(eK?y.c.FRESH_ADD_TO_CART:y.c.ADD_TO_CART,n),eK||d(Y,i.newProductsCount),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),o.t0 instanceof Error&&(0,g.h4)(null===o.t0||void 0===o.t0?void 0:o.t0.message,"error");case 16:return o.prev=16,e9(!1),eU(!1),o.finish(16);case 20:case"end":return o.stop()}},_callee2,null,[[0,13,16,20]])})),function(){return t.apply(this,arguments)}),onOpenGiftList=function(){e9(!0)},onCloseGiftList=function(){e9(!1)},onSearchItemClick=function(){tc.dispatch({event:y.c.SELECT_ITEM,data:{params:{query_id:eM,rees_query_id:eZ},ecommerce:(0,b.Zf)({product:ev,source:j.D.SEARCH_RESULTS,suggestItemIndex:eS})},resetData:{params:null,ecommerce:null}})},ta=(r=(0,o.Z)(s().mark(function _callee3(e,t,r){return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if((0,Z.D)(e),i.prev=1,!r){i.next=7;break}return addGTMEvent(y.c.REMOVE_FROM_WISHLIST),i.next=6,eT(t,eG.city_id);case 6:return i.abrupt("return",i.sent);case 7:return i.next=9,eE(t,eG.city_id);case 9:eK||addGTMEvent(y.c.ADD_TO_WISHLIST),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),i.t0 instanceof Error&&(0,g.h4)(null===i.t0||void 0===i.t0?void 0:i.t0.message,"error");case 15:case"end":return i.stop()}},_callee3,null,[[1,12]])})),function(e,t,i){return r.apply(this,arguments)}),tu=(0,x.V)(es),td=[].concat((0,i.Z)(e0),(0,i.Z)(tu)),tl=eI(Y),tp=Number((0,A.j)(J)),tf=eQ?"/p/s/".concat(Y):"/p/".concat(en),tm=ey?ei:tf;if(ek&&!ey){var t_="recommended_by=".concat(I.Ll),th="recommended_code=".concat(eb),tg="source=".concat(j.D.SEARCH_RESULTS),tv="suggest_item_index=".concat(eS);tm="".concat(tm,"?").concat(t_,"&").concat(th,"&").concat(tg,"&").concat(tv).concat(eH)}var tk=F?function(){if(!ew){(0,g.h4)(eF("profile:pleaseAuthorize"),"warning");return}e5.push(tm)}:function(){if(to&&!e8)return onOpenGiftList();ts()},tP=eD?3:5,ty=(c=void 0===eu?[]:eu).length?c.map(function(e){return{title:e.title,description:e.values.map(function(e){return e.value_ru})}}).filter(function(e){return e.title&&e.description}).slice(0,tP):[],tb={oldPrice:Number(V.oldPrice),price:Number(V.price),creditTerms:_objectSpread(_objectSpread({},V.creditTerms),{},{creditTypeLabel:eF("checkout:".concat(V.creditTerms.creditTypeLabel)),monthLabel:eF("common:monthsShort")})},tS={addToCartAnimationPath:"/assets/animations/add_to_cart_loader.json",bonus:void 0===ea?"":ea,className:(0,a.Z)(K().product,(0,n.Z)({},K().horizontalProduct,eO)),deliveryDate:ed,imagesData:X?eQ?(0,M.T)({images:[C.xf],title:q,t:eF}):ee?[{src:ee}]:(0,M.T)({images:X.slice(0,5),title:q,t:eF}):[],goToCheckoutLabel:eF("product:buyNow"),isAddToCartInProgress:eq,isBot:l,isAirba:eK,isFavourite:tl,isInCart:eN(Y),isMobile:eD,isPreorder:F,isService:eQ,isShowCase:eo,isSignedIn:ew,loadingImgSrc:C.fl,onAddToCartClick:tk,onHeartButtonClick:eQ?void 0:function(e){return ta(e,Y,tl)},payment:tb,pickupDate:el,rating:tp,reviews:$,rightStickers:e1,shouldRenderGoToCheckoutButton:!1,showCaseLabel:eF("product:onShowCase"),sku:Y,title:q,topStickers:td,unit_measurement:ef,withShippingInfo:!eK,withRating:!0,withBonus:!0,withCreditTerms:!ek,kaspiInstallmentInfo:em,hasExpressDelivery:e_,hasFastDelivery:eh,deliveryTime:eg,type:er};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(S.r,{className:K().itemLink,href:tm,onClick:function(){ek&&(eW(ev.sku,null!=eS?eS:0),onSearchItemClick())},role:"link",tabIndex:0,children:[(0,Q.jsx)(_.g,{match:eO&&!eQ,children:(0,Q.jsx)(z,_objectSpread({specifications:ty},tS))}),(0,Q.jsx)(_.g,{match:!eO||eQ,children:(0,Q.jsx)(O.l,_objectSpread(_objectSpread({},tS),{},{withStickersPlace:!0}))})]}),(0,Q.jsx)(_.g,{match:to,children:(0,Q.jsx)(h.u,{className:K().giftModal,isOpen:e3,onClose:onCloseGiftList,children:(0,Q.jsx)(w.W,{className:K().gifts,dataPlw:"add-gift-modal",giftBlockRef:e4,giftProducts:tn,isAddToCartLoading:eq,isCategoryPage:!0,isOpened:e3,limitExceeded:ti,onAddGift:tr,onAddToCart:ts,onClose:onCloseGiftList,onDeleteGift:tt,selectedGifts:te})})})]})})},68904:function(e,t,r){"use strict";r.d(t,{W:function(){return R}});var i=r(59499),n=r(50029),o=r(27812),c=r(87794),s=r.n(c),a=r(90512),u=r(78036),d=r(5152),l=r.n(d),p=r(51702),f=r(67294),m=r(29625),_=r(58621),h=r(1815),g=r(50946),v=r(7683),k=r(57506),P=r(58646),y=r(52579),b=r(81606),S=r(52842),x=r(24037),C=r(27430),I=r(37740),T=r(31593),E=r(79186),j=r(71563),getGiftState=function(e){var t,r=e.promotionId,i=e.promotionRuleId,n=e.giftSku,o=e.limitExceeded,c=e.selectedGifts,s=c[r],a=(0,j.S)(c),u=null==s?void 0:s.rules.find(function(e){return e.id===i}),d=!!(null==u?void 0:null===(t=u.chosenProducts)||void 0===t?void 0:t.find(function(e){return e.sku===n})),l=!a&&(null==u?void 0:u.id)===i&&!d;return{isDisabled:o&&!d||!a&&!s||l,isChecked:d}},G=r(48658),O=r.n(G),D=r(85893),w=l()(function(){return r.e(6585).then(r.bind(r,56585))},{ssr:!1,loadableGenerated:{webpack:function(){return[56585]}}}),R=(0,u.Pi)(function(e){var t,r,c=e.giftBlockRef,u=e.dataPlw,d=e.isOpened,l=e.onClose,j=e.onAddGift,G=e.selectedGifts,R=e.onDeleteGift,B=e.isCategoryPage,L=e.className,N=e.isPreOrder,A=e.onAddToCart,M=e.isAddToCartLoading,Z=e.isCartPage,W=void 0!==Z&&Z,H=e.onAddPreOrder,F=e.limitExceeded,K=e.setIsWidgetSpreaded,Q=void 0===K?function(){}:K,z=e.giftProducts,q=e.ranges,U=e.onRangesRequest,Y=(0,k.oR)().core.currentCity.slug,V=(0,p.$G)(["product","common"]),J=V.t,$=V.i18n,X=(0,b.Yy)(),ee=(0,f.useState)(!1),et=ee[0],er=ee[1],ei=null!=X&&X.isMobile?I.Q4.MOBILE:I.Q4.DESKTOP,en=null!=X&&X.isMobile?I.EW.MOBILE:I.EW.DESKTOP,eo=Object.values(G).flatMap(function(e){return e.rules.flatMap(function(e){return e.chosenProducts.flatMap(function(e){return e.sku})})}),ec=z.filter(function(e){return eo.includes(e.sku)}),es=z.filter(function(e){return!eo.includes(e.sku)}),ea=[].concat((0,o.Z)(ec),(0,o.Z)(es)),eu=(0,f.useState)(ei),ed=eu[0],el=eu[1],ep=W?ea:z,ef=(0,f.useMemo)(function(){var e=Object.values(G).flat().length;return e?e&&!F?J("product:chooseAnotherPresent"):null:J("product:chooseAGift")},[G]),em=ed>=z.length?J("common:rollUp"):J("common:showMoreGift"),e_=F&&(null==X?void 0:X.isMobile)||B&&F,eh=W?F:e_,eg=(null==z?void 0:z.length)>ei;(0,f.useEffect)(function(){el(ei)},[JSON.stringify(z),ei]);var ev=void 0!==N&&N?void 0===H?function(){}:H:function(){W&&(l(),Q(!1)),A()},ek=(0,x.H)(Y,$.language),eP=(t=(0,n.Z)(s().mark(function _callee(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U&&U(),er(!0);case 2:case"end":return e.stop()}},_callee)})),function(){return t.apply(this,arguments)});return(0,D.jsxs)("div",{ref:c,className:(0,a.Z)(O().block,L,(r={},(0,i.Z)(r,O().category,B),(0,i.Z)(r,O().opened,d),r)),"data-plw":u,children:[(0,D.jsxs)("div",{className:O().wrapper,children:[(0,D.jsxs)("div",{className:O().closeIconWrapper,children:[(0,D.jsxs)("div",{className:O().titleWrapper,children:[(0,D.jsx)(h.O,{className:O().icon,type:"color"}),(0,D.jsx)(v.Z,{className:O().title,text:J("product:technodomGivesYouGifts"),type:"Body1B"})]}),(0,D.jsx)(g.g,{match:d,children:(0,D.jsx)(_.h,{className:O().closeIcon,onClick:l})})]}),(0,D.jsxs)("div",{className:O().descriptionBlock,children:[(0,D.jsx)(g.g,{match:!!ef,children:(0,D.jsx)(v.Z,{className:O().descriptionTitle,text:ef,type:"Body2B"})}),(0,D.jsxs)(g.g,{match:W,children:[(0,D.jsx)("button",{className:O().descriptionButton,onClick:eP,children:(0,D.jsx)(v.Z,{className:O().descriptionButtonText,text:J("checkout:moreAboutPromotion"),type:"Body2"})}),(0,D.jsx)(w,{isOpen:et,onClose:function(){return er(!1)},ranges:void 0===q?[]:q})]})]}),(0,D.jsx)("ul",{className:O().list,children:ep.slice(0,ed).map(function(e){var t=e.title,r=e.sku,i=e.oldPrice,n=e.image,o=e.ruleId,c=e.id,s=e.uri,a=e.type,u=getGiftState({promotionId:c,promotionRuleId:o,giftSku:r,limitExceeded:F,selectedGifts:G}),d=u.isChecked,l=u.isDisabled,onClick=function(){d?R(c,o):(el(ei),j(c,o,r))},p={target:"_blank",href:"".concat(ek,"/p/").concat(s),rel:"noreferrer noopener"},f={oldPrice:Number(i),price:P.ME},m={src:(0,S.BQ)(n,{height:y.rD.M,width:y.rD.M}).webp,alt:"".concat(t," - ").concat(J("photo"))};return(0,D.jsx)("li",{className:O().listItem,"data-plw":"gift-item",children:null!=X&&X.isMobile?(0,D.jsx)(T.R,{className:O().card,imagesData:m,isCheckbox:!0,isChecked:d,isDisabled:l,isGift:!0,isNano:!0,isPure:!0,link:p,onCheck:onClick,payment:f,title:t}):(0,D.jsx)(E.l,{className:O().card,imagesData:m,isCheckbox:!0,isChecked:d,isDisabled:l,isGift:!0,isNano:!0,isPure:!0,link:p,onCheck:onClick,payment:f,title:t,type:a})},"".concat(r,"-").concat(o))})}),(0,D.jsx)(g.g,{match:eg,children:(0,D.jsx)("div",{className:O().toggleWrapper,children:(0,D.jsx)(m.z,{className:O().toggle,onClick:function(e){if(e.preventDefault(),ed>=z.length){var t;el(ei),(0,C.l)(null==c?void 0:null===(t=c.current)||void 0===t?void 0:t.offsetTop)}else el(function(e){return e+ei<z.length?e+en:z.length})},text:em,theme:"Tertiary"})})})]}),(0,D.jsx)(g.g,{match:!!eh,children:(0,D.jsx)("div",{className:(0,a.Z)(O().buttonWrapper,(0,i.Z)({},O().cart,W)),children:(0,D.jsx)(m.z,{className:O().addToCart,"data-plw":"select-gift-button",isLoading:M,onClick:ev,text:J("product:chooseGifts"),theme:"Secondary"})})})]})})},37740:function(e,t,r){"use strict";var i,n,o,c,s,a;r.d(t,{EW:function(){return n},Q4:function(){return i},fS:function(){return o}}),(c=i||(i={}))[c.DESKTOP=5]="DESKTOP",c[c.MOBILE=4]="MOBILE",(s=n||(n={}))[s.DESKTOP=15]="DESKTOP",s[s.MOBILE=16]="MOBILE",(a=o||(o={}))[a.DESKTOP=9]="DESKTOP",a[a.MOBILE=6]="MOBILE"},38752:function(e,t,r){"use strict";r.d(t,{x:function(){return i.x}});var i=r(96732)},5546:function(e,t,r){"use strict";r.d(t,{_:function(){return giftsFromCartData}});var i=r(27812),n=r(13704),giftsFromCartData=function(e){var t,r,o=null===(t=e.products)||void 0===t?void 0:t.map(function(t){return(0,n.o)(e,t.sku,t.id,!0,"",!1)}),c=null===(r=e.products)||void 0===r?void 0:r.map(function(t){return(0,n.o)(e,t.sku,t.id,!1,"",!0)}),s=[];return null==o||o.forEach(function(e){s.push.apply(s,(0,i.Z)(e))}),null==c||c.forEach(function(e){s.push.apply(s,(0,i.Z)(e))}),s}},61972:function(e){e.exports={itemLink:"ProductItem_itemLink__cud7j",giftModal:"ProductItem_giftModal__nj8gj",gifts:"ProductItem_gifts__cJT1g",product:"ProductItem_product__hZy7p",horizontalProduct:"ProductItem_horizontalProduct__PYYut","fade-in":"ProductItem_fade-in__4fr7b",spin:"ProductItem_spin__sMuhi"}},48658:function(e){e.exports={closeIcon:"ProductGifts_closeIcon__s09GT",block:"ProductGifts_block__kC3Ud",category:"ProductGifts_category__H30cQ",list:"ProductGifts_list__vrrma",wrapper:"ProductGifts_wrapper__62f60",closeIconWrapper:"ProductGifts_closeIconWrapper__mvgNW",titleWrapper:"ProductGifts_titleWrapper__NPa6p",icon:"ProductGifts_icon__C12Pc",title:"ProductGifts_title__MunQf",descriptionBlock:"ProductGifts_descriptionBlock__OBLL8",descriptionTitle:"ProductGifts_descriptionTitle__R__VH",descriptionButton:"ProductGifts_descriptionButton__lSh9x",descriptionButtonText:"ProductGifts_descriptionButtonText__HscTi",listItem:"ProductGifts_listItem__B3P7A",toggleWrapper:"ProductGifts_toggleWrapper__O8dLC",toggle:"ProductGifts_toggle__bbDhQ",buttonWrapper:"ProductGifts_buttonWrapper__otZv7",cart:"ProductGifts_cart__KtpGH",addToCart:"ProductGifts_addToCart__wy_NW","fade-in":"ProductGifts_fade-in__1Riuu",spin:"ProductGifts_spin__H8bfv"}}}]);