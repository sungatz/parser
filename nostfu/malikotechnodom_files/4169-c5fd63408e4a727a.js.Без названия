(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{54639:function(e,t,r){"use strict";r.d(t,{s:function(){return h},v:function(){return f}});var n,i,o=r(59499),c=r(50029),a=r(87794),s=r.n(a),u=r(51702),l=r(30643),d=r(91479),v=r(5229),p=r(96862);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var getPath=function(e){return"/safeguard/api/v1".concat(e)},f=(n=(0,c.Z)(s().mark(function _callee(e,t){var r,n;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,l.HT)({url:getPath("/safeguards"),config:{params:{city_id:e,sku:t},headers:(0,d.nQ)()}});case 2:if(n=(r=i.sent).data,r.success){i.next=7;break}throw Error(null===u.ag||void 0===u.ag?void 0:u.ag.t("errors:failedToGetSafeguards"));case 7:return i.abrupt("return",(0,v.z)(n));case 8:case"end":return i.stop()}},_callee)})),function(e,t){return n.apply(this,arguments)}),h=(i=(0,c.Z)(s().mark(function _callee2(e){var t,r,n,i,o,c;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.productSku,r=e.orderId,n=e.guarantySku,i=e.serialNum,a.next=3,(0,l.HT)({url:getPath("/safeguards/certificate"),config:{params:_objectSpread({},(0,p.p)({productSku:t,orderId:r,guarantySku:n,serialNum:i})),headers:_objectSpread({},(0,d.nQ)()),responseType:"blob"}});case 3:if(c=(o=a.sent).data,o.success){a.next=8;break}throw Error(null===u.ag||void 0===u.ag?void 0:u.ag.t("errors:failedToCompleteTheOperation"));case 8:return a.abrupt("return",c);case 9:case"end":return a.stop()}},_callee2)})),function(e){return i.apply(this,arguments)})},77696:function(e,t,r){"use strict";var n,i;r.d(t,{t:function(){return n}}),(i=n||(n={})).INSTALLATION="installation",i.TECHNO_SERVICE="techno_service",i.TECHNO_SERVICE_PLUS="techno_service_plus"},99561:function(e,t,r){"use strict";r.d(t,{y:function(){return handleGTM}});var n=r(27812),i=r(92040),o=r(67384),handleGTM=function(e){var t=e.newCartList,r=e.deletedCartItems,c=void 0===r?[]:r,a=e.event,s=e.cartList,u=e.handleGTMByIdAndEvent,l=e.removeGiftGTMHandle,d=e.id,v=e.isService,p=void 0!==v&&v,f=e.parentId,h=void 0===f?"":f,_=e.newCartData;if(c.length>0){var S=(0,n.Z)(s);c.forEach(function(e){S=S.filter(function(t){return t.sku!==e.sku})}),u({event:i.c.REMOVE_FROM_CART,id:"",quantity:o.ly,currentCartList:S,isService:p,parentId:h,newCartData:_}),(void 0===l?function(){}:l)()}u({event:a,id:d,quantity:o.ly,currentCartList:t,isService:p,newCartData:_,parentId:h})}},77605:function(e,t,r){"use strict";r.d(t,{eb:function(){return changePriceWithTotalPrice},Kd:function(){return changeQuantityForCurrent},h1:function(){return changeQuantityForEcommerce},Ce:function(){return getDeletedPromoGifts},QQ:function(){return getParentCategories},ys:function(){return s.y},CB:function(){return removeServicesFromAdditionalItems}});var n=r(59499),i=r(67384);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var changePriceWithTotalPrice=function(e){if(!e.length)return e;var getTotalPriceUsd=function(e){var t;return Number(null===(t=e.totalPriceUsd?e.totalPriceUsd/e.quantity:e.priceUsd)||void 0===t?void 0:t.toFixed(i.EW))},getTotalPrice=function(e){return Number(e.totalPrice?e.totalPrice/e.quantity:e.price)};return e.map(function(e){return _objectSpread(_objectSpread({},e),{},{price:getTotalPrice(e),priceUsd:getTotalPriceUsd(e),additionalItems:e.additionalItems?e.additionalItems.map(function(e){return _objectSpread(_objectSpread({},e),{},{price:getTotalPrice(e),priceUsd:getTotalPriceUsd(e)})}):[]})})},o=r(27812);function editAdditionalItems_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function editAdditionalItems_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?editAdditionalItems_ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):editAdditionalItems_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var editAdditionalItems=function(e,t){if(!e.length)return e;var r,n=(0,o.Z)(e);if(t&&null!==(r=e[0].additionalItems)&&void 0!==r&&r.length){var c=editAdditionalItems_objectSpread(editAdditionalItems_objectSpread({},e[0].additionalItems[0]),{},{quantity:i.ly});n[0].additionalItems=[c]}else n[0].additionalItems=[];return n};function changeQuantityForEcommerce_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function changeQuantityForEcommerce_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?changeQuantityForEcommerce_ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):changeQuantityForEcommerce_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var changeQuantityForEcommerce=function(e,t,r){return(0,o.Z)(e),r?editAdditionalItems(e,t).map(function(e){return changeQuantityForEcommerce_objectSpread(changeQuantityForEcommerce_objectSpread({},e),{},{quantity:r})}):e};function removeAdditionalItem_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function removeAdditionalItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?removeAdditionalItem_ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):removeAdditionalItem_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var removeAdditionalItem=function(e){var t=e.additionalItems?e.quantity<e.additionalItems.reduce(function(e,t){return e+t.quantity},0):0;return e.additionalItems&&e.additionalItems.length>0&&t?removeAdditionalItem_objectSpread(removeAdditionalItem_objectSpread({},e),{},{additionalItems:e.additionalItems[0].quantity>1?e.additionalItems?e.additionalItems.map(function(e,t){return 0===t?removeAdditionalItem_objectSpread(removeAdditionalItem_objectSpread({},e),{},{quantity:e.quantity-1}):e}):[]:e.additionalItems.splice(0,1)}):e},changeQuantityForCurrent=function(e,t){return e.map(function(e){return e.id===t?removeAdditionalItem(e):e})},c=r(24316),removeServicesFromAdditionalItems=function(e){return(e.additionalItems||[]).filter(function(e){return e.type!==c.C0.SERVICE&&e.type!==c.C0.GUARANTY})},a=r(52579),getDeletedPromoGifts=function(e,t,r){var n=[],i=[];if((null==t?void 0:null===(c=t.promotions)||void 0===c?void 0:c.length)!==(null==e?void 0:null===(s=e.promotions)||void 0===s?void 0:s.length)){var c,s,u,l=[];null==e||null===(u=e.promotions)||void 0===u||u.forEach(function(e){var r;(null!==(r=null==t?void 0:t.promotions)&&void 0!==r?r:[]).find(function(t){return e.id===t.id})||e.type!==a.Gc.PRODUCT||l.push.apply(l,(0,o.Z)(e.result.products||[]))}),null==l||l.forEach(function(e){n.push(e.sku)})}return null==r||r.forEach(function(e){n.forEach(function(t){e.sku===t&&i.push(e)})}),{deletedCartItems:i,deletedSkus:n}},getParentCategories=function(e,t){var r;return(null===(r=t.find(function(t){return t.sku===e}))||void 0===r?void 0:r.categories)||[]},s=r(99561)},55288:function(e,t,r){"use strict";r.d(t,{Du:function(){return p},Q0:function(){return d},QA:function(){return v}});var n,i,o,c=r(50029),a=r(87794),s=r.n(a),u=r(30643),l=r(5229),getPath=function(e){return"/peon/api/v1".concat(e)},d=(n=(0,c.Z)(s().mark(function _callee(e){var t,r,n,i;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.cityId,r=e.products,o.next=3,(0,u.a4)({url:"/peon/api/v3".concat("/services/packets"),data:{city_id:t,products:r}});case 3:if(i=(n=o.sent).data,n.success){o.next=8;break}return o.abrupt("return",[]);case 8:return o.abrupt("return",(0,l.z)(i));case 9:case"end":return o.stop()}},_callee)})),function(e){return n.apply(this,arguments)}),v=(i=(0,c.Z)(s().mark(function _callee3(e,t,r,n){var i,o;return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i={parentId:e,cityId:t,page:r,limit:n},o=(0,u.HT)({url:getPath("/services/packets"),config:{params:i}}),c.abrupt("return",o);case 3:case"end":return c.stop()}},_callee3)})),function(e,t,r,n){return i.apply(this,arguments)}),p=(o=(0,c.Z)(s().mark(function _callee5(e,t){var r;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.a4)({url:getPath("/services/calendars"),data:{skus:e},params:{cityId:t}});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},_callee5)})),function(e,t){return o.apply(this,arguments)})},12925:function(e,t,r){"use strict";r.d(t,{E:function(){return f}});var n=r(78036),i=r(55916),o=r(10219),c=r(43585),a=r(7683),s=r(57506),u=r(28685),l=r(34768),d=r(69692),v=r.n(d),p=r(85893),f=(0,n.Pi)(function(){var e=(0,s.oR)().core.isBreezyWidgetScriptLoaded,t=(0,l.l)(),r=t.tradeInInfo,n=t.isSwitchOn,d=t.onOpenBreezyModal,f=t.fullTradeInPrice;return n&&r?e?(0,p.jsxs)("div",{className:v().root,children:[(0,p.jsxs)("div",{className:v().left,children:[(0,p.jsx)(a.Z,{className:v().title,text:null==r?void 0:r.model,type:"RegularS"}),(0,p.jsx)(a.Z,{className:v().price,text:"".concat(f," â‚¸"),type:"RegularS"})]}),(0,p.jsx)(i.h,{className:v().iconButton,icon:(0,p.jsx)(o.J,{color:u.eq,height:20,width:20}),onClick:d})]}):(0,p.jsx)(c.O,{animation:"wave",className:v().placeholder,isLoading:!0}):null})},20338:function(e,t,r){"use strict";r.d(t,{V:function(){return b}});var n=r(90512),i=r(78036),o=r(51702),c=r(91539),a=r(75180),s=r(9877),u=r(43585),l=r(7683),d=r(57506),v=r(28685),p=r(34768),f=r(29625),h=r(6100),_=r(82934),S=r.n(_),m=r(85893),y=(0,i.Pi)(function(){var e=(0,o.$G)().t,t=(0,p.l)(),r=t.isOpenWarningModal,n=t.onCloseWarningModal;return(0,m.jsx)(h.u,{isOpen:r,isShowCloseBtn:!0,onClose:n,overlayClassName:S().modal,children:(0,m.jsxs)("div",{className:S().block,children:[(0,m.jsx)("div",{className:S().hideButton}),(0,m.jsx)(l.Z,{className:S().title,text:e("profile:warning"),type:"Headline"}),(0,m.jsxs)("div",{className:S().content,children:[(0,m.jsx)(l.Z,{className:S().text,text:e("checkout:tradeInPriceWarning"),type:"RegularL"}),(0,m.jsx)(f.z,{"aria-label":"success-button",onClick:n,size:"XL",text:e("checkout:toTheCart"),theme:"Accent"})]})]})})}),g=r(24193),k=r.n(g),b=(0,i.Pi)(function(e){var t=e.className,r=(0,o.$G)(["checkout"]).t,i=(0,d.oR)().core.isBreezyWidgetScriptLoaded,f=(0,p.l)(),h=f.onToggleSwitcher,_=f.isSwitchOn,S=f.parentItemId,g=f.onOpenInfoModal;return f.hasAnotherTradeInInCart?null:i?(0,m.jsxs)("div",{className:(0,n.Z)(k().block,t),children:[(0,m.jsxs)("div",{className:k().wrapper,children:[(0,m.jsx)(a.$,{className:"mr-8"}),(0,m.jsx)(l.Z,{className:k().mainText,text:r("checkout:availableInTradeInWithSale"),type:"Body2B"}),(0,m.jsx)(c.f,{className:k().infoIcon,onClick:g,stroke:v.Go})]}),(0,m.jsx)(s.T,{checked:_,className:k().switcher,id:"breezy-".concat(S),name:"breezyTradeInTrigger",onChange:h,type:"Secondary"}),(0,m.jsx)(y,{})]}):(0,m.jsx)(u.O,{animation:"wave",className:k().placeholder,isLoading:!0})})},92582:function(e,t,r){"use strict";r.d(t,{B:function(){return y}});var n=r(50029),i=r(92777),o=r(82262),c=r(59499),a=r(87794),s=r.n(a),u=r(68949),l=r(51702),d=r(2409),v=r(92040),p=r(39151),f=r(52842),h=r(5229),_=r(96862),S=r(24316),m=r(82348),y=function(){function BreezyStoreV2(e){var t,r,o,a=this,f=e.checkoutStore,y=e.parentItemId,g=e.quantity,k=e.isActive,b=e.parentSku,I=e.parentType,w=e.parentMerchant,O=e.GTM,P=e.parentProduct,x=e.isBreezyWidgetScriptLoaded,Z=e.locale;(0,i.Z)(this,BreezyStoreV2),(0,c.Z)(this,"checkoutStore",void 0),(0,c.Z)(this,"parentItemId",void 0),(0,c.Z)(this,"isSwitchOn",!1),(0,c.Z)(this,"isInfoModalOpen",!1),(0,c.Z)(this,"isActive",!1),(0,c.Z)(this,"quantity",0),(0,c.Z)(this,"parentSku",""),(0,c.Z)(this,"parentType",void 0),(0,c.Z)(this,"parentMerchant",void 0),(0,c.Z)(this,"tradeInInfo",void 0),(0,c.Z)(this,"isTradeIsOn",!1),(0,c.Z)(this,"GTM",void 0),(0,c.Z)(this,"parentProduct",void 0),(0,c.Z)(this,"isOpenWarningModal",!1),(0,c.Z)(this,"locale",void 0),(0,c.Z)(this,"onOpenInfoModal",function(){a.isInfoModalOpen=!0}),(0,c.Z)(this,"onCloseInfoModal",function(){a.isInfoModalOpen=!1}),(0,c.Z)(this,"onOpenBreezyModal",function(){try{window.TI_WIDGET_APP||(window.TI_WIDGET_APP=new window.TIWidget({settings:{domain:"technodom.kz",locale:a.locale,root_element:"TIWidget"},api:{onLoad:function(){},onDrop:function(){},onCart:a.onCart}})),window.TI_WIDGET_APP.tradeInWithGood(a.tradeInWithGoodsParams)}catch(e){(0,d.h4)(null===l.ag||void 0===l.ag?void 0:l.ag.t("errors:tryLater"),"error")}}),(0,c.Z)(this,"onToggleSwitcher",function(){if(a.isSwitchOn){a.isSwitchOn=!a.isSwitchOn,a.onDeactivateTradeIn();return}a.onOpenBreezyModal()}),(0,c.Z)(this,"setTradeInInfo",function(e){a.tradeInInfo=e}),(0,c.Z)(this,"onDeactivateTradeIn",(0,n.Z)(s().mark(function _callee(){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a.findedProductInCart){t.next=4;break}return t.next=4,a.checkoutStore.updateProduct({product:{quantity:a.findedProductInCart.quantity,id:a.findedProductInCart.id,sku:a.findedProductInCart.sku,isActive:a.findedProductInCart.isActive,tradein:!1,tradeinInfo:(0,_.p)(null===(e=a.findedProductInCart)||void 0===e?void 0:e.tradeinInfo)}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),(0,d.h4)((0,m.e)(t.t0),"error");case 9:case"end":return t.stop()}},_callee,null,[[0,6]])}))),(0,c.Z)(this,"onAddToCartGTMEvent",function(){var e;null===(e=a.GTM)||void 0===e||e.dispatch({event:v.c.ADD_TO_CART,data:{ecommerce:(0,p.Zf)({product:a.parentProduct,isTradeIn:!0})},resetData:{ecommerce:null}})}),(0,c.Z)(this,"onUpdateCartGTMEvent",function(){var e;null===(e=a.GTM)||void 0===e||e.dispatch({event:v.c.ADD_TO_CART,data:{ecommerce:(0,p.Zf)({product:a.checkoutStore.cartData.products.find(function(e){return e.sku===a.parentSku}),isTradeIn:!0})},resetData:{ecommerce:null}})}),(0,c.Z)(this,"onAddToCart",(t=(0,n.Z)(s().mark(function _callee2(e){var t;return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.checkoutStore.addProduct({product:{sku:a.parentSku,type:null!==(t=a.parentType)&&void 0!==t?t:S.C0.REGULAR,merchant:a.parentMerchant,tradein:!0,tradeinInfo:{device_id:String(e.device_id),device_imei:String(e.device_imei),grade:String(e.grade),model:String(e.model),price:String(e.price),trade_up_model:e.trade_up_model?String(e.trade_up_model):null,trade_up_price:e.trade_up_price?String(e.trade_up_price):null,certificate:e.certificate,trade_in_price:e.trade_in_price?String(e.trade_in_price):null,top_up_price:e.top_up_price?String(e.top_up_price):null}}});case 3:a.onAddToCartGTMEvent(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),(0,d.h4)((0,m.e)(r.t0),"error");case 9:case"end":return r.stop()}},_callee2,null,[[0,6]])})),function(e){return t.apply(this,arguments)})),(0,c.Z)(this,"onUpdateCart",(r=(0,n.Z)(s().mark(function _callee3(e){var t,r;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.info,r=e.withGTM,n.prev=1,!a.findedProductInCart){n.next=6;break}return n.next=5,a.checkoutStore.updateProduct({product:{quantity:a.findedProductInCart.quantity,id:a.findedProductInCart.id,sku:a.findedProductInCart.sku,isActive:a.findedProductInCart.isActive,tradein:!0,tradeinInfo:{device_id:String(t.device_id),device_imei:String(t.device_imei),grade:String(t.grade),model:String(t.model),price:String(t.price),trade_up_model:t.trade_up_model?String(t.trade_up_model):null,trade_up_price:t.trade_up_price?String(t.trade_up_price):null,certificate:t.certificate,trade_in_price:t.trade_in_price?String(t.trade_in_price):null,top_up_price:t.top_up_price?String(t.top_up_price):null}}});case 5:r&&a.onUpdateCartGTMEvent();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),(0,d.h4)((0,m.e)(n.t0),"error");case 11:case"end":return n.stop()}},_callee3,null,[[1,8]])})),function(e){return r.apply(this,arguments)})),(0,c.Z)(this,"onOpenWarningModal",function(){a.isOpenWarningModal=!0}),(0,c.Z)(this,"onCloseWarningModal",function(){a.isOpenWarningModal=!1}),(0,c.Z)(this,"onCart",(o=(0,n.Z)(s().mark(function _callee4(e){var t;return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=(0,h.z)(e),!a.tradeInTotalMoreThanCartTotal(t.tradeInPrice,t.topUpPrice)){r.next=4;break}return a.onOpenWarningModal(),r.abrupt("return");case 4:return r.next=6,a.clearAnotherTradeInItems();case 6:if(a.setTradeInInfo(t),!a.checkoutStore.checkIsInCart(a.parentSku)){r.next=12;break}return r.next=10,a.onUpdateCart({info:e,withGTM:!0});case 10:r.next=14;break;case 12:return r.next=14,a.onAddToCart(e);case 14:case"end":return r.stop()}},_callee4)})),function(e){return o.apply(this,arguments)})),(0,c.Z)(this,"clearAnotherTradeInItems",(0,n.Z)(s().mark(function _callee5(){var e;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=a.checkoutStore.cartData.products.find(function(e){return e.tradein&&e.tradeinInfo}))){t.next=4;break}return t.next=4,a.checkoutStore.updateProduct({product:{quantity:e.quantity,id:e.id,sku:e.sku,isActive:e.isActive,tradein:!1,tradeinInfo:null}});case 4:case"end":return t.stop()}},_callee5)}))),(0,c.Z)(this,"tradeInTotalMoreThanCartTotal",function(e,t){var r;return a.findedProductInCart?Number(null==e?void 0:e.replace(/\s/g,""))+Number(null==t?void 0:t.replace(/\s/g,""))>Number(a.checkoutStore.calculationOrder.calculation.grandTotal):Number(null==e?void 0:e.replace(/\s/g,""))+Number(null==t?void 0:t.replace(/\s/g,""))>Number(a.checkoutStore.calculationOrder.calculation.grandTotal)+Number(null===(r=a.tradeInWithGoodsParams.price)||void 0===r?void 0:r.replace(/\s/g,""))}),this.checkoutStore=f,this.parentItemId=y,this.quantity=null!=g?g:0,this.isActive=null==k||k,this.parentSku=null!=b?b:"",this.parentType=null!=I?I:S.C0.REGULAR,this.parentMerchant=null!=w?w:{code:"",name:""},this.GTM=O,this.parentProduct=P,this.locale=Z,(0,u.makeAutoObservable)(this),(0,u.autorun)(function(){x&&(window.TI_WIDGET_APP.current_api.onCart=a.onCart)}),(0,u.autorun)(function(){var e,t=f.cartData.products.find(function(e){return e.sku===b});a.tradeInInfo=null==t?void 0:t.tradeinInfo,a.isSwitchOn=null!==(e=null==t?void 0:t.tradein)&&void 0!==e&&e})}return(0,o.Z)(BreezyStoreV2,[{key:"hasAnotherTradeInInCart",get:function(){var e=this;return this.checkoutStore.cartData.products.some(function(t){return t.tradein&&e.parentSku!==t.sku})}},{key:"findedProductInCart",get:function(){var e=this;return this.checkoutStore.cartData.products.find(function(t){return t.sku===e.parentSku})}},{key:"tradeInWithGoodsParams",get:function(){var e,t=this.findedProductInCart||this.parentProduct;return{article:(null==t?void 0:t.sku)||"",name:(null==t?void 0:t.title)||"",price:String(null==t?void 0:t.price),image:(0,f.BQ)((null==t?void 0:null===(e=t.images)||void 0===e?void 0:e[0])||t.image,{height:800,width:800}).default}}},{key:"fullTradeInPrice",get:function(){var e,t,r,n,i;return null!==(e=Number(null===(t=this.tradeInInfo)||void 0===t?void 0:null===(r=t.topUpPrice)||void 0===r?void 0:r.replace(/\s/g,""))+Number(this===null||void 0===this?void 0:null===(n=this.tradeInInfo)||void 0===n?void 0:null===(i=n.tradeInPrice)||void 0===i?void 0:i.replace(/\s/g,"")))&&void 0!==e?e:""}}]),BreezyStoreV2}()},34768:function(e,t,r){"use strict";r.d(t,{N:function(){return i},l:function(){return useBreezyV2}});var n=r(67294),i=(0,n.createContext)(null),useBreezyV2=function(){var e=(0,n.useContext)(i);if(null===e)throw Error("You have forgotten to wrap your root component with BreezyStoreContextProvider");return e}},66358:function(e,t,r){"use strict";r.d(t,{y:function(){return y}});var n=r(59499),i=r(90512),o=r(78036),c=r(5152),a=r.n(c),s=r(51702),u=r(29625),l=r(1073),d=r(6100),v=r(7683),p=r(57506),f=r(28685),h=r(6646),_=r.n(h),S=r(85893),m=a()(function(){return Promise.resolve().then(r.t.bind(r,5409,23))},{ssr:!1,loadableGenerated:{webpack:function(){return[5409]}}}),y=(0,o.Pi)(function(e){var t,r,o=e.className,c=e.icon,a=e.hintKey,h=(0,s.$G)().t,y=(0,p.oR)(),g=y.core.isMobile,k=y.productInfoStore,b=k.isExpressDeliveryHintOpened,I=k.toggleExpressDeliveryHintOpened,onHintClick=function(){I()},w=(0,S.jsx)(s.cC,{className:_().expressDeliveryHint,components:[(0,S.jsx)("b",{children:"0"},0)],i18nKey:a,parent:"p"});return g?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.u,{className:(0,i.Z)((r={},(0,n.Z)(r,_().iconGreen,c.color===f.qL.green),(0,n.Z)(r,_().iconOrange,c.color===f.qL.orange),r)),height:c.size,onClick:onHintClick,width:c.size}),(0,S.jsxs)(d.u,{isOpen:b,isShowCloseBtn:!0,onClose:onHintClick,withGesture:!0,children:[(0,S.jsx)(v.Z,{className:"mb-16",text:h("product:expressDelivery"),type:"Body1B"}),w,(0,S.jsx)(u.z,{className:_().button,onClick:onHintClick,size:"L",text:h("common:proceed"),theme:"Secondary"})]})]}):(0,S.jsx)("div",{className:o,style:{width:c.size,height:c.size},children:(0,S.jsx)(m,{arrowColor:f.yc,backgroundColor:f.yc,className:_().tooltip,delayHide:1,delayShow:1,effect:"solid",eventType:"hover",id:"express-delivery-hint",multiline:!0,overlay:w,place:"bottom",theme:"dark",children:(0,S.jsx)(l.u,{className:(0,i.Z)((t={},(0,n.Z)(t,_().iconGreen,c.color===f.qL.green),(0,n.Z)(t,_().iconOrange,c.color===f.qL.orange),t)),height:c.size,width:c.size})})})})},35737:function(e,t,r){"use strict";r.d(t,{g:function(){return FastDeliveryHint_FastDeliveryHint}});var n=r(59499),i=r(90512),o=r(5152),c=r.n(o),a=r(51702),s=r(67294),u=r(29625),l=r(94173),d=r(6100),v=r(7683),p=r(28685),f=r(11437),h=r.n(f),_=r(85893),S=c()(function(){return Promise.resolve().then(r.t.bind(r,5409,23))},{ssr:!1,loadableGenerated:{webpack:function(){return[5409]}}}),FastDeliveryHint_FastDeliveryHint=function(e){var t,r,o=e.className,c=e.daysFrom,f=e.daysTo,m=e.icon,y=(0,a.$G)().t,g=(0,s.useState)(!1),k=g[0],b=g[1],I=y("checkout:fastDelivery:hint",{returnObjects:!0,start:c,count:f}),w=(0,_.jsx)("ul",{className:h().hintWrapper,children:Array.isArray(I)&&I.map(function(e,t){return(0,_.jsx)("li",{className:h().hintItem,children:(0,_.jsx)(v.Z,{className:h().text,text:e,type:"RegularL"})},t)})});return(0,_.jsxs)("div",{className:o,style:{width:m.size,height:m.size},children:[(0,_.jsx)(S,{arrowColor:p.yc,backgroundColor:p.yc,className:h().tooltip,delayHide:1,delayShow:1,effect:"solid",eventType:"hover",id:"fast-delivery-hint",multiline:!0,overlay:w,place:"bottom",theme:"dark",children:(0,_.jsx)(l.p,{className:(0,i.Z)(h().tooltipIcon,(t={},(0,n.Z)(t,h().iconYellow,m.color===p.qL.yellow),(0,n.Z)(t,h().iconOrange,m.color===p.qL.orange),t)),height:m.size,width:m.size})}),(0,_.jsx)("button",{className:h().mobileButton,onClick:function(){return b(!0)},children:(0,_.jsx)(l.p,{className:(0,i.Z)((r={},(0,n.Z)(r,h().iconYellow,m.color===p.qL.yellow),(0,n.Z)(r,h().iconOrange,m.color===p.qL.orange),r)),height:m.size,width:m.size})}),(0,_.jsxs)(d.u,{iconLeft:(0,_.jsx)("div",{className:h().dhlIcon}),isOpen:k,isShowCloseBtn:!0,onClose:function(){return b(!1)},overlayClassName:h().modal,title:y("checkout:fastDelivery:title"),withGesture:!0,children:[w,(0,_.jsx)(u.z,{className:h().continueButton,onClick:function(){return b(!1)},size:"L",text:y("checkout:continue")})]})]})}},72373:function(e,t,r){"use strict";r.d(t,{i:function(){return n.i}});var n=r(4218)},4218:function(e,t,r){"use strict";r.d(t,{i:function(){return useProductServices},u:function(){return i}});var n=r(67294),i=(0,n.createContext)(null),useProductServices=function(){var e=(0,n.useContext)(i);if(!e)throw Error("You have forgotten to wrap your component with ProductServicesContext.Provider");return e}},88195:function(e,t,r){"use strict";r.d(t,{H:function(){return l}});var n=r(92777),i=r(82262),o=r(59499),c=r(68949),a=r(26646),s=r(24316);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u="savedServices",l=function(){function SavedServicesStore(e){var t=this,r=e.checkoutStore,i=e.productSku;(0,n.Z)(this,SavedServicesStore),(0,o.Z)(this,"_checkoutStore",void 0),(0,o.Z)(this,"_productSku",""),(0,o.Z)(this,"savedServices",[]),(0,o.Z)(this,"additionalItems",[]),(0,o.Z)(this,"_syncAdditionalItems",function(e){if(t._checkoutStore.checkIsInCart(e)){var r,n=t._checkoutStore.getCartItem(e);n&&(t.additionalItems=null!==(r=n.additionalItems)&&void 0!==r?r:[])}}),(0,o.Z)(this,"_calculateServicesSum",function(e){return e.reduce(function(e,t){var r;return e+(null!==(r=t.price)&&void 0!==r?r:0)},0)}),(0,o.Z)(this,"syncSavedServicesWithLS",function(){var e=(0,a.oV)(u),r=null==e?void 0:e[t._productSku];r&&(t.savedServices=r)}),(0,o.Z)(this,"setSavedServices",function(e){t.savedServices=e}),(0,o.Z)(this,"cleanSavedServices",function(){t.savedServices=[]}),this._checkoutStore=r,this._productSku=i,(0,c.makeAutoObservable)(this),this._initReactions(i)}return(0,i.Z)(SavedServicesStore,[{key:"_initReactions",value:function(e){var t=this;(0,c.reaction)(function(){return t.savedServices},function(t){var r=_objectSpread(_objectSpread({},(0,a.oV)(u)),{},(0,o.Z)({},e,t));(0,a.be)(r,u)}),(0,c.reaction)(function(){return t._checkoutStore.cartData.products},function(){return t._syncAdditionalItems(e)},{fireImmediately:!0})}},{key:"addedServicesSummary",get:function(){if(this._checkoutStore.checkIsInCart(this._productSku)){var e=this.additionalItems.filter(function(e){return e.type===s.C0.SERVICE||e.type===s.C0.GUARANTY});return{count:e.length,sum:this._calculateServicesSum(e)}}return{count:this.savedServices.length,sum:this._calculateServicesSum(this.savedServices)}}}]),SavedServicesStore}()},63072:function(e,t,r){"use strict";r.d(t,{t:function(){return D}});var n=r(50029),i=r(27812),o=r(92777),c=r(82262),a=r(59499),s=r(87794),u=r.n(s),l=r(68949),d=r(51702),v=r(2409),p=r(92040),f=r(24037),h=r(71563),_=r(26646),S=r(24316),m=r(77696),y=r(23681),g=r(13704),k=r(82348),b=r(16835),I=r(55288),w=r(68363),O=r(54639),adaptPacketsToService=function(e){var t=e.packets;return Array.isArray(t)&&t.length?t.map(function(e){return{description:"",category:m.t.INSTALLATION,demonstration:null,services:e.map(function(e){var t=e.packetServiceType,r=e.descriptions,n=e.id,i=e.isAvailable,o=e.price,c=e.priceUsd,a=void 0===c?null:c,s=e.sku,u=e.title,l=e.type,d=void 0===l?S.C0.SERVICE:l,v=e.isBlackStatusPromo,p=e.oldPrice;return{caption:void 0===t?"":t,descriptions:void 0===r?[]:r,id:void 0===n?"":n,isAvailable:void 0!==i&&i,price:void 0===o?null:o,priceUsd:"string"==typeof a?Number(a):a,sku:void 0===s?"":s,title:void 0===u?"":u,type:d,isActive:!1,category:m.t.INSTALLATION,isBlackStatusPromo:void 0!==v&&v,oldPrice:void 0===p?null:p}})}}):[]},P=r(55105);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var toggleServicesActiveStatus=function(e){var t=e.serviceCategories,r=e.productsToCheck;return t.length?t.map(function(e){var t=e.description,n=e.category,i=e.services;return{category:n,description:t,demonstration:e.demonstration,services:i.map(function(e){return _objectSpread(_objectSpread({},e),{},{isActive:r.some(function(t){return t.sku===e.sku})})})}}):[]},x="technoServices",Z="installations",j=(0,c.Z)(function ProductServicesStore(){var e,t,r,i=this;(0,o.Z)(this,ProductServicesStore),(0,a.Z)(this,"technoServices",[]),(0,a.Z)(this,"installations",[]),(0,a.Z)(this,"productInfo",null),(0,a.Z)(this,"setTechnoServices",function(e,t){i.technoServices=e,i.toggleServicesActiveStatus(x,t)}),(0,a.Z)(this,"setInstallations",function(e,t){i.installations=e,i.toggleServicesActiveStatus(Z,t)}),(0,a.Z)(this,"queryTechnoServices",(e=(0,n.Z)(u().mark(function _callee(e,t){var r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,O.v)(e,t);case 2:return r=n.sent,n.abrupt("return",Array.isArray(r)&&r.length?r.map(function(e){var t=e.baseDescription,r=e.category,n=e.guaranties,i=e.demonstration;return{category:r,demonstration:void 0===i?null:i,description:t,services:n.map(function(e){var t=e.duration,n=e.shortDescriptions,i=void 0===n?[]:n,o=e.id,c=e.isAvailable,a=e.price,s=e.priceUsd,u=e.sku,l=e.type,v=void 0===l?S.C0.GUARANTY:l,p=e.title,f=e.compensations,h=void 0===f?[]:f;return{caption:void 0===t?"":t,descriptions:i.length?i:Array.isArray(h)&&h.length?h.map(function(e){var t;return null!==(t=null===d.ag||void 0===d.ag?void 0:d.ag.t("product:compensation",{amount:(0,P.kztAmount)(e.amount),fromDay:e.fromDay,untilDay:e.untilDay}))&&void 0!==t?t:""}):[],id:void 0===o?"":o,isAvailable:void 0!==c&&c,price:void 0===a?null:a,priceUsd:void 0===s?null:s,sku:void 0===u?"":u,type:v,title:void 0===p?"":p,isActive:!1,category:r,isBlackStatusPromo:!1,oldPrice:null}})}}):[]);case 4:case"end":return n.stop()}},_callee)})),function(t,r){return e.apply(this,arguments)})),(0,a.Z)(this,"queryInstallations",(t=(0,n.Z)(u().mark(function _callee2(e,t,r){var n,i,o;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,I.Q0)({cityId:t,products:[{sku:r,categories:e}]});case 2:return n=c.sent,o=void 0===(i=(0,b.Z)(n,1)[0])?{}:i,c.abrupt("return",adaptPacketsToService(o));case 7:case"end":return c.stop()}},_callee2)})),function(e,r,n){return t.apply(this,arguments)})),(0,a.Z)(this,"queryProductInfo",(r=(0,n.Z)(u().mark(function _callee3(e,t){var r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,w.n4)(e,t);case 2:(r=n.sent.data)&&(i.productInfo=r);case 5:case"end":return n.stop()}},_callee3)})),function(e,t){return r.apply(this,arguments)})),(0,a.Z)(this,"toggleServicesActiveStatus",function(e,t){i[e]=toggleServicesActiveStatus({serviceCategories:i[e],productsToCheck:t})}),(0,l.makeAutoObservable)(this)}),C=r(88195),T=r(15814);function ServiceReviewsStore_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ServiceReviewsStore_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ServiceReviewsStore_ownKeys(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ServiceReviewsStore_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A=(0,c.Z)(function ServiceReviewsStore(){var e,t,r,i=this;(0,o.Z)(this,ServiceReviewsStore),(0,a.Z)(this,"queryServiceReviews",(e=(0,n.Z)(u().mark(function _callee(e){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,T.Ie)({sku:e}));case 1:case"end":return t.stop()}},_callee)})),function(t){return e.apply(this,arguments)})),(0,a.Z)(this,"_mergeServicesWithReviews",(t=(0,n.Z)(u().mark(function _callee3(e){var t;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.map(function(){var e=(0,n.Z)(u().mark(function _callee2(e){var t;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.queryServiceReviews(e.sku);case 2:return t=r.sent,r.abrupt("return",ServiceReviewsStore_objectSpread(ServiceReviewsStore_objectSpread({},e),{},{reviews:t}));case 4:case"end":return r.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}()),r.abrupt("return",Promise.all(t));case 2:case"end":return r.stop()}},_callee3)})),function(e){return t.apply(this,arguments)})),(0,a.Z)(this,"addReviewsToServices",(r=(0,n.Z)(u().mark(function _callee5(e){var t;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.map(function(){var e=(0,n.Z)(u().mark(function _callee4(e){var t,r,n,o,c;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.description,r=e.category,n=e.services,o=e.demonstration,a.next=3,i._mergeServicesWithReviews(n);case 3:return c=a.sent,a.abrupt("return",{demonstration:o,description:t,category:r,services:c});case 5:case"end":return a.stop()}},_callee4)}));return function(t){return e.apply(this,arguments)}}()),r.abrupt("return",Promise.all(t));case 2:case"end":return r.stop()}},_callee5)})),function(e){return r.apply(this,arguments)})),(0,l.makeAutoObservable)(this)}),D=function(){function ProductServicesStoreVM(e){var t,r,c,s,h,b,I=this,w=e.coreStore,O=e.checkoutStore,P=e.productSku,T=e.handleGTMOnServiceRemove,D=e.handleGTMOnServiceAdd;(0,o.Z)(this,ProductServicesStoreVM),(0,a.Z)(this,"_model",new j),(0,a.Z)(this,"_serviceReviewsStore",new A),(0,a.Z)(this,"_savedServicesStore",void 0),(0,a.Z)(this,"_coreStore",void 0),(0,a.Z)(this,"_checkoutStore",void 0),(0,a.Z)(this,"_handleGTMOnServiceAdd",void 0),(0,a.Z)(this,"_handleGTMOnServiceRemove",void 0),(0,a.Z)(this,"_quantity",0),(0,a.Z)(this,"_isActive",!1),(0,a.Z)(this,"_productId",""),(0,a.Z)(this,"productSku",void 0),(0,a.Z)(this,"isServiceProcessing",!1),(0,a.Z)(this,"isTechnoServicesLoading",!1),(0,a.Z)(this,"isInstallationsLoading",!1),(0,a.Z)(this,"isServicesModalOpened",!1),(0,a.Z)(this,"_countServices",function(e){if(!(null!=e&&e.length))return 0;var t,r,n=e.map(function(e){return e.services});return null!==(t=null==n?void 0:null===(r=n.flat(1))||void 0===r?void 0:r.length)&&void 0!==t?t:0}),(0,a.Z)(this,"_updateCurrentServicesLocale",function(e){return e.map(function(e){return e.services}).flat(1).filter(function(e){return I._savedServicesStore.savedServices.some(function(t){return t.sku===e.sku})})}),(0,a.Z)(this,"_syncServicesWithNewLocale",function(){var e=[].concat((0,i.Z)(I._updateCurrentServicesLocale(I._model.technoServices)),(0,i.Z)(I._updateCurrentServicesLocale(I._model.installations)));I._savedServicesStore.setSavedServices(e),I._model.toggleServicesActiveStatus(x,e)}),(0,a.Z)(this,"_loadInitialData",(t=(0,n.Z)(u().mark(function _callee(e){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I._loadProductInfo(e);case 2:return t.next=4,I._loadServices();case 4:case"end":return t.stop()}},_callee)})),function(e){return t.apply(this,arguments)})),(0,a.Z)(this,"_loadProductInfo",(r=(0,n.Z)(u().mark(function _callee2(e){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I._model.queryProductInfo(e,I._coreStore.currentCity.city_id);case 2:case"end":return t.stop()}},_callee2)})),function(e){return r.apply(this,arguments)})),(0,a.Z)(this,"_loadServices",(0,n.Z)(u().mark(function _callee3(){var e,t;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!((t=null===(e=I._model.productInfo)||void 0===e?void 0:e.type)===S.C0.REGULAR||t===S.C0.MTO)){r.next=4;break}return r.next=4,Promise.all([I._loadInstallations(),I._loadTechnoServices()]);case 4:case"end":return r.stop()}},_callee3)}))),(0,a.Z)(this,"_loadTechnoServices",(0,n.Z)(u().mark(function _callee4(){var e,t,r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(0,l.runInAction)(function(){I.isTechnoServicesLoading=!0}),n.next=4,I._model.queryTechnoServices(I._coreStore.currentCity.city_id,I.productSku);case 4:return e=n.sent,n.next=7,I._serviceReviewsStore.addReviewsToServices(e);case 7:t=n.sent,r=I._checkoutStore.checkIsInCart(I.productSku),I._model.setTechnoServices(t,r?I._savedServicesStore.additionalItems:I._savedServicesStore.savedServices),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),(0,v.h4)((0,k.e)(n.t0),"error");case 15:return n.prev=15,(0,l.runInAction)(function(){I.isTechnoServicesLoading=!1}),n.finish(15);case 18:case"end":return n.stop()}},_callee4,null,[[0,12,15,18]])}))),(0,a.Z)(this,"_loadInstallations",(0,n.Z)(u().mark(function _callee5(){var e,t,r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,(0,l.runInAction)(function(){I.isInstallationsLoading=!0}),I._model.productInfo){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,I._model.queryInstallations(I._model.productInfo.categories,I._coreStore.currentCity.city_id,I.productSku);case 6:return e=n.sent,n.next=9,I._serviceReviewsStore.addReviewsToServices(e);case 9:t=n.sent,r=I._checkoutStore.checkIsInCart(I.productSku),I._model.setInstallations(t,r?I._savedServicesStore.additionalItems:I._savedServicesStore.savedServices),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),(0,v.h4)((0,k.e)(n.t0),"error");case 17:return n.prev=17,(0,l.runInAction)(function(){I.isInstallationsLoading=!1}),n.finish(17);case 20:case"end":return n.stop()}},_callee5,null,[[0,14,17,20]])}))),(0,a.Z)(this,"_syncWithCartProduct",function(e){var t,r,n,i,o=I._checkoutStore.getCartItem(e);if(o){I._quantity=null!==(t=o.quantity)&&void 0!==t?t:0,I._isActive=null!==(r=o.isActive)&&void 0!==r&&r,I._productId=null!==(n=o.id)&&void 0!==n?n:"";var c=null!==(i=o.additionalItems)&&void 0!==i?i:[];I._model.toggleServicesActiveStatus(x,c),I._model.toggleServicesActiveStatus(Z,c)}}),(0,a.Z)(this,"_onServiceRemove",(c=(0,n.Z)(u().mark(function _callee6(e){var t,r,n,i,o;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,I.isServiceProcessing=!0,i=null!==(t=null===(r=I._savedServicesStore.additionalItems.find(function(t){return t.sku===e}))||void 0===r?void 0:r.id)&&void 0!==t?t:"",(0,_.Iu)(y.ou),o=(0,g.L)({totals:I._checkoutStore.cartData,checkout:I._checkoutStore,cityPrefix:(0,f.H)(I._coreStore.currentCity.slug,null!==(n=null===d.ag||void 0===d.ag?void 0:d.ag.language)&&void 0!==n?n:"")}),c.next=7,I._checkoutStore.removeFromCart(i);case 7:return c.abrupt("return",{id:i,cartList:o});case 10:c.prev=10,c.t0=c.catch(0),(0,v.h4)((0,k.e)(c.t0),"error");case 13:return c.prev=13,I.isServiceProcessing=!1,c.finish(13);case 16:case"end":return c.stop()}},_callee6,null,[[0,10,13,16]])})),function(e){return c.apply(this,arguments)})),(0,a.Z)(this,"_onServiceAdd",(s=(0,n.Z)(u().mark(function _callee7(e,t,r){var n,i,o,c,a,s,l,p;return u().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.sku,i=t.type,u.prev=1,I.isServiceProcessing=!0,a={quantity:I._quantity,id:e,sku:I.productSku,isActive:I._isActive,source:r},u.next=6,I._checkoutStore.updateProduct({product:a,relatedProducts:[{sku:n,type:i}]});case 6:return s=u.sent,l=(0,g.L)({totals:s,checkout:I._checkoutStore,cityPrefix:(0,f.H)(I._coreStore.currentCity.slug,null!==(o=null===d.ag||void 0===d.ag?void 0:d.ag.language)&&void 0!==o?o:"")}),p=null==s?void 0:null===(c=s.products)||void 0===c?void 0:c.find(function(e){return e.sku===n}),u.abrupt("return",{addedService:p,cartList:l});case 12:u.prev=12,u.t0=u.catch(1),(0,v.h4)((0,k.e)(u.t0),"error");case 15:return u.prev=15,I.isServiceProcessing=!1,u.finish(15);case 18:case"end":return u.stop()}},_callee7,null,[[1,12,15,18]])})),function(e,t,r){return s.apply(this,arguments)})),(0,a.Z)(this,"checkIsServiceAlreadyWithTheProduct",function(e){var t,r,n;return(null!==(r=null===(n=(0,g.L)({totals:I._checkoutStore.cartData,checkout:I._checkoutStore,cityPrefix:(0,f.H)(I._coreStore.currentCity.slug,null!==(t=null===d.ag||void 0===d.ag?void 0:d.ag.language)&&void 0!==t?t:"")}).find(function(e){return e.sku===I.productSku}))||void 0===n?void 0:n.additionalItems)&&void 0!==r?r:[]).some(function(t){return t.sku===e})}),(0,a.Z)(this,"_onServiceToggle",(h=(0,n.Z)(u().mark(function _callee8(e,t){var r,n,i,o,c,a,s,l,d;return u().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r=e.sku,!I.checkIsServiceAlreadyWithTheProduct(r)){u.next=8;break}return u.next=4,I._onServiceRemove(r);case 4:(n=u.sent)&&(o=n.id,c=n.cartList,null===(i=I._handleGTMOnServiceRemove)||void 0===i||i.call(I,{id:o,currentCartList:c,event:p.c.REMOVE_FROM_CART})),u.next=12;break;case 8:return u.next=10,I._onServiceAdd(I._productId,e,t);case 10:(a=u.sent)&&(l=a.addedService,d=a.cartList,null===(s=I._handleGTMOnServiceAdd)||void 0===s||s.call(I,{event:p.c.ADD_TO_CART,service:l,currentCartList:d}));case 12:case"end":return u.stop()}},_callee8)})),function(e,t){return h.apply(this,arguments)})),(0,a.Z)(this,"_isServiceAlreadySaved",function(e){return I._savedServicesStore.savedServices.some(function(t){return t.title===e.title})}),(0,a.Z)(this,"_removeServiceFromProduct",function(e){var t=I._savedServicesStore.savedServices.filter(function(t){return t.title!==e.title});I._savedServicesStore.setSavedServices(t),e.category===m.t.INSTALLATION?I._model.toggleServicesActiveStatus(Z,I._savedServicesStore.savedServices):I._model.toggleServicesActiveStatus(x,I._savedServicesStore.savedServices)}),(0,a.Z)(this,"_addServiceToProduct",function(e){var t=I._savedServicesStore.savedServices.filter(function(t){return t.category!==e.category});I._savedServicesStore.setSavedServices([].concat((0,i.Z)(t),[e])),e.category===m.t.INSTALLATION?I._model.toggleServicesActiveStatus(Z,I._savedServicesStore.savedServices):I._model.toggleServicesActiveStatus(x,I._savedServicesStore.savedServices)}),(0,a.Z)(this,"_saveServiceToProduct",function(e){I._isServiceAlreadySaved(e)?I._removeServiceFromProduct(e):I._addServiceToProduct(e)}),(0,a.Z)(this,"isServiceForProductInCart",function(e){return!!I._savedServicesStore.additionalItems.find(function(t){return t.sku===e})}),(0,a.Z)(this,"openServicesModal",function(){I.isServicesModalOpened=!0}),(0,a.Z)(this,"closeServicesModal",function(){I.isServicesModalOpened=!1}),(0,a.Z)(this,"syncSavedServicesWithLS",function(){I._savedServicesStore.syncSavedServicesWithLS()}),(0,a.Z)(this,"cleanSavedServices",function(){I._savedServicesStore.cleanSavedServices()}),(0,a.Z)(this,"onServiceButtonClick",(b=(0,n.Z)(u().mark(function _callee9(e,t){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!I._checkoutStore.checkIsInCart(I.productSku)){r.next=5;break}return r.next=3,I._onServiceToggle(e,t);case 3:r.next=6;break;case 5:I._saveServiceToProduct(e);case 6:case"end":return r.stop()}},_callee9)})),function(e,t){return b.apply(this,arguments)})),this._savedServicesStore=new C.H({checkoutStore:O,productSku:P}),this._coreStore=w,this._checkoutStore=O,this._handleGTMOnServiceAdd=D,this._handleGTMOnServiceRemove=T,this.productSku=P,this._loadInitialData(P),(0,l.makeAutoObservable)(this),(0,l.reaction)(function(){return I._checkoutStore.cartData.products},function(){return I._syncWithCartProduct(P)},{fireImmediately:!0}),(0,l.reaction)(function(){return[I._coreStore.locale,I._coreStore.currentCity.city_id]},(0,n.Z)(u().mark(function _callee10(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I._loadServices();case 2:I._syncServicesWithNewLocale();case 3:case"end":return e.stop()}},_callee10)})))}return(0,c.Z)(ProductServicesStoreVM,[{key:"technoServices",get:function(){return this._model.technoServices}},{key:"installations",get:function(){return this._model.installations}},{key:"isInstallationsVisible",get:function(){return!this._savedServicesStore.additionalItems.some(function(e){return e.isGift&&e.type===S.C0.SERVICE})&&!!this.installations.length}},{key:"isServicesLoading",get:function(){return this.isInstallationsLoading||this.isTechnoServicesLoading}},{key:"addedServicesSummary",get:function(){return this._savedServicesStore.addedServicesSummary}},{key:"savedServices",get:function(){return this._savedServicesStore.savedServices}},{key:"servicesCount",get:function(){return this._countServices(this.technoServices)+this._countServices(this.installations)}},{key:"popularServices",get:function(){var e,t=this._model.technoServices.map(function(e){var t,r;return null!==(t=null===(r=e.services)||void 0===r?void 0:r.at(0))&&void 0!==t?t:{}}),r=null!==(e=this._model.installations.map(function(e){var t,r;return null!==(t=null===(r=e.services)||void 0===r?void 0:r.at(0))&&void 0!==t?t:{}}).at(0))&&void 0!==e?e:{};return[].concat((0,i.Z)(t),[r]).filter(function(e){return!(0,h.S)(e)})}},{key:"isAllRecommendedInCart",get:function(){var e=this._savedServicesStore.additionalItems;return this.popularServices.every(function(t){return e.find(function(e){return e.sku===t.sku})})}},{key:"getActiveServiceTitle",value:function(e){var t,r,n,i;return null!==(t=null!==(r=null===(n=e.find(function(e){return e.isActive}))||void 0===n?void 0:n.title)&&void 0!==r?r:null===(i=e.at(0))||void 0===i?void 0:i.title)&&void 0!==t?t:""}}]),ProductServicesStoreVM}()},69692:function(e){e.exports={root:"Calculation_root__AB4oO",title:"Calculation_title__wRPE3",price:"Calculation_price__JFOIH",additionalInfoText:"Calculation_additionalInfoText__817_T",placeholder:"Calculation_placeholder__JA_83","fade-in":"Calculation_fade-in__9Yvc_",spin:"Calculation_spin__lIQDe"}},24193:function(e){e.exports={block:"Content_block__a7Hdr",wrapper:"Content_wrapper__a_vM8",tradeInIcon:"Content_tradeInIcon__UXyXi",mainText:"Content_mainText__g9T_X",infoIcon:"Content_infoIcon__8ln9e",switcher:"Content_switcher__UTqHe",placeholder:"Content_placeholder__N5ORq","fade-in":"Content_fade-in__gyp_j",spin:"Content_spin__NYCuA"}},82934:function(e){e.exports={block:"WarningModal_block__qLWIW",content:"WarningModal_content__3JdU1",modal:"WarningModal_modal__v_apr",hideButton:"WarningModal_hideButton__qS44M",title:"WarningModal_title___XTfY",text:"WarningModal_text__Xu6r0","fade-in":"WarningModal_fade-in__WrrEP",spin:"WarningModal_spin__Cfsmi"}},6646:function(e){e.exports={tooltip:"ExpressDeliveryHint_tooltip__KJ_Fv",iconGreen:"ExpressDeliveryHint_iconGreen__e5P2B",iconOrange:"ExpressDeliveryHint_iconOrange__ohHIk",button:"ExpressDeliveryHint_button__bJnaR",expressDeliveryHint:"ExpressDeliveryHint_expressDeliveryHint__jtkdL","fade-in":"ExpressDeliveryHint_fade-in__iE7cU",spin:"ExpressDeliveryHint_spin__CDRXT"}},11437:function(e){e.exports={mobileButton:"FastDeliveryHint_mobileButton__CXiIa",tooltip:"FastDeliveryHint_tooltip__NvSwV",tooltipIcon:"FastDeliveryHint_tooltipIcon__8d30e",iconYellow:"FastDeliveryHint_iconYellow__8OTqX",iconOrange:"FastDeliveryHint_iconOrange__1jkrV",hintWrapper:"FastDeliveryHint_hintWrapper__A3axz",text:"FastDeliveryHint_text__k7vKr",hintItem:"FastDeliveryHint_hintItem__RWku8",continueButton:"FastDeliveryHint_continueButton__JLwvx",modal:"FastDeliveryHint_modal__dbsfe",dhlIcon:"FastDeliveryHint_dhlIcon__sGnIa","fade-in":"FastDeliveryHint_fade-in__ClE32",spin:"FastDeliveryHint_spin__tjwxb"}}}]);